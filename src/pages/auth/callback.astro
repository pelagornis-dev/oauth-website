---
import Layout from '@layouts/Layout.astro';
---

<Layout>
  <div class="w-full max-w-sm mx-auto flex flex-col items-center justify-center min-h-[60vh]">
    <span class="text-lg text-black font-semibold mb-2">로그인 처리 중...</span>
    <span class="text-gray-400 text-sm">잠시만 기다려주세요</span>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const accessToken = params.get('token');
      const refreshToken = params.get('refresh');
      const redirect = params.get('redirect');
      if (accessToken && refreshToken) {
        localStorage.setItem('accessToken', accessToken);
        localStorage.setItem('refreshToken', refreshToken);
        window.location.href = redirect && redirect.startsWith('/') ? redirect : '/profile';
      } else {
        alert('로그인 토큰이 유효하지 않습니다.');
        window.location.href = '/login';
      }
    });
  </script>
</Layout>
